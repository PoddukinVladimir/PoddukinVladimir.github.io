{"version":3,"sources":["../../../../app/components/app-comments/app-comments.controller.js"],"names":["commentsCtrl","itemsFactory","$scope","items","getItems","number","$watch","updatedData","oldData","currentIndex","undefined","currentItem","currentComments","comments","$on","event","data","getCurrentComments","id","clearData","addComment","commentText","clearTextArea"],"mappings":";;;;;;IAAMA,Y;AACF,0BAAYC,YAAZ,EAA0BC,MAA1B,EAAkC;AAAA;;AAAA;;AAC9B,aAAKD,YAAL,GAAoBA,YAApB;AACA,aAAKE,KAAL,GAAaF,aAAaG,QAAb,EAAb;AACA,aAAKC,MAAL,GAAc,EAAd;;AAEAH,eAAOI,MAAP,CAAc;AAAA,mBAAM,MAAKL,YAAL,CAAkBG,QAAlB,EAAN;AAAA,SAAd,EAAkD,UAACG,WAAD,EAAcC,OAAd,EAA0B;AACxE;AACA,kBAAKL,KAAL,GAAaI,WAAb;;AAEA,gBAAI,MAAKE,YAAL,KAAsBC,SAA1B,EAAqC;AACjC,sBAAKC,WAAL,GAAmBJ,YAAY,MAAKE,YAAjB,CAAnB;AACA,sBAAKG,eAAL,GAAuB,MAAKD,WAAL,CAAiBE,QAAxC;AACH;AACJ,SARD,EAQG,IARH;;AAUAX,eAAOY,GAAP,CAAW,gBAAX,EAA6B,UAACC,KAAD,EAAQC,IAAR,EAAiB;AAC1C,kBAAKP,YAAL,GAAoBO,KAAKX,MAAzB;AACA,kBAAKA,MAAL,GAAcW,KAAKX,MAAL,GAAc,CAA5B;AACA,kBAAKO,eAAL,GAAuB,MAAKK,kBAAL,EAAvB;AACH,SAJD;;AAMAf,eAAOY,GAAP,CAAW,eAAX,EAA4B,UAACC,KAAD,EAAQG,EAAR,EAAe;AACvC,gBAAI,CAAC,MAAKP,WAAN,IAAqBO,OAAO,MAAKP,WAAL,CAAiBO,EAAjD,EAAqD;;AAErD;AACA,kBAAKC,SAAL;AACH,SALD;AAMH;;;;oCAEW;AACR,iBAAKP,eAAL,GAAuBF,SAAvB;AACA,iBAAKC,WAAL,GAAmBD,SAAnB;AACH;;;6CAEoB;AACjB,iBAAKC,WAAL,GAAmB,KAAKV,YAAL,CAAkBG,QAAlB,GAA6B,KAAKK,YAAlC,CAAnB;AACA,mBAAO,KAAKE,WAAL,CAAiBE,QAAxB;AACH;;;qCAEY;AACT,iBAAKZ,YAAL,CAAkBmB,UAAlB,CAA6B,KAAKT,WAAlC,EAA+C,KAAKU,WAApD;AACA,iBAAKC,aAAL;AACH;;;wCAEe;AACZ,iBAAKD,WAAL,GAAmB,EAAnB;AACH;;;4CAEmB;AAChB,mBAAO,KAAKV,WAAL,KAAqBD,SAA5B;AACH","file":"app-comments.controller.js","sourcesContent":["class commentsCtrl {\r\n    constructor(itemsFactory, $scope) {\r\n        this.itemsFactory = itemsFactory;\r\n        this.items = itemsFactory.getItems();\r\n        this.number = '';\r\n\r\n        $scope.$watch(() => this.itemsFactory.getItems(), (updatedData, oldData) => {\r\n            // updating data from service\r\n            this.items = updatedData;\r\n\r\n            if (this.currentIndex !== undefined) {\r\n                this.currentItem = updatedData[this.currentIndex];\r\n                this.currentComments = this.currentItem.comments;\r\n            }\r\n        }, true);\r\n\r\n        $scope.$on('itemIsSelected', (event, data) => {\r\n            this.currentIndex = data.number;\r\n            this.number = data.number + 1;\r\n            this.currentComments = this.getCurrentComments();\r\n        });\r\n\r\n        $scope.$on('itemIsDeleted', (event, id) => {\r\n            if (!this.currentItem || id !== this.currentItem.id) return;\r\n\r\n            // deleting comments\r\n            this.clearData();\r\n        });\r\n    }\r\n\r\n    clearData() {\r\n        this.currentComments = undefined;\r\n        this.currentItem = undefined;\r\n    }\r\n\r\n    getCurrentComments() {\r\n        this.currentItem = this.itemsFactory.getItems()[this.currentIndex];\r\n        return this.currentItem.comments;\r\n    }\r\n\r\n    addComment() {\r\n        this.itemsFactory.addComment(this.currentItem, this.commentText);\r\n        this.clearTextArea();\r\n    }\r\n\r\n    clearTextArea() {\r\n        this.commentText = \"\";\r\n    }\r\n\r\n    isAnyItemSelected() {\r\n        return this.currentItem !== undefined;\r\n    }\r\n}"]}